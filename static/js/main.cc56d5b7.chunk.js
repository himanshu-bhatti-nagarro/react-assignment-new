(this["webpackJsonpreact-assignment-solution"]=this["webpackJsonpreact-assignment-solution"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},35:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),i=n.n(c),o=(n(35),n(4)),l=n(3),s=n(8),u=Object(s.a)(),m=n(14),d=n(28),E=n(29),f="ALERT_SUCCESS",g="ALERT_ERROR",p="ALERT_CLEAR",v="USERS_REGISTER_REQUEST",b="USERS_REGISTER_SUCCESS",A="USERS_REGISTER_FAILURE",h="USERS_LOGIN_REQUEST",y="USERS_LOGIN_SUCCESS",S="USERS_LOGIN_FAILURE",C="USERS_LOGOUT",O="USERS_GETALL_REQUEST",N="USERS_GETALL_SUCCESS",T="USERS_GETALL_FAILURE",_="USERS_DELETE_REQUEST",L="USERS_DELETE_SUCCESS",j="USERS_DELETE_FAILURE",R="GET_ALL_ARTICLES",w="GET_ALL_ARTICLES_SUCCESS",U="GET_ALL_ARTICLES_FAILURE",I="GET_ARTICLE_BY_SLUG",k="GET_ARTICLE_BY_SLUG_SUCCESS",D="GET_ARTICLE_BY_SLUG_FAILURE",G="ADD_NEW_ARTICLE",B="ADD_NEW_ARTICLE_SUCCESS",M="ADD_NEW_ARTICLE_FAILURE",F="UPDATE_ARTICLE",x="UPDATE_ARTICLE_SUCCESS",q="UPDATE_ARTICLE_FAILURE",z="DELETE_ARTICLE",W="DELETE_ARTICLE_SUCCESS",J="DELETE_ARTICLE_FAILURE",P="GET_ALL_TAGS",H="GET_ALL_TAGS_SUCCESS",X="GET_ALL_TAGS_FAILURE",K="GET_ALL_ARTICLES_BY_TAG",Y="GET_ALL_ARTICLES_BY_TAG_SUCCESS",Q="GET_ALL_ARTICLES_BY_TAG_FAILURE",V="MARK_UNMARK_ARTICLE_FAVOURITE",$="MARK_UNMARK_ARTICLE_FAVOURITE_SUCCESS",Z="MARK_UNMARK_ARTICLE_FAVOURITE_SUCCESS",ee="GET_ALL_COMMENTS",te="GET_ALL_COMMENTS_SUCCESS",ne="GET_ALL_COMMENTS_FAILURE",ae="ADD_NEW_COMMENT",re="ADD_NEW_COMMENT_SUCCESS",ce="ADD_NEW_COMMENT_FAILURE",ie="DELETE_COMMENT",oe="DELETE_COMMENT_SUCCESS",le="DELETE_COMMENT_FAILURE",se=JSON.parse(localStorage.getItem("user")),ue=se?{loggedIn:!0,user:se}:{};var me=n(21),de=n(1);var Ee=Object(m.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{loggingIn:!0,user:t.user};case y:return{loggedIn:!0,user:t.user};case S:case C:return{};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{registering:!0};case b:case A:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{loading:!0};case N:return{items:t.users};case T:return{error:t.error};case _:return Object(de.a)(Object(de.a)({},e),{},{items:e.items.map((function(e){return e.id===t.id?Object(de.a)(Object(de.a)({},e),{},{deleting:!0}):e}))});case L:return{items:e.items.filter((function(e){return e.id!==t.id}))};case j:return Object(de.a)(Object(de.a)({},e),{},{items:e.items.map((function(e){if(e.id===t.id){e.deleting;var n=Object(me.a)(e,["deleting"]);return Object(de.a)(Object(de.a)({},n),{},{deleteError:t.error})}return e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{type:"alert-success",message:t.message};case g:return{type:"alert-danger",message:t.message};case p:return{};default:return e}},articles:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case R:return Object(de.a)(Object(de.a)({},t),{},{articles:(null===(e=n.articles)||void 0===e?void 0:e.articles)?n.articles.articles:[]});case w:return Object(de.a)(Object(de.a)({},t),{},{articles:n.articles.articles});case U:return{};case K:return Object(de.a)({},t);case Y:return Object(de.a)(Object(de.a)({},t),{},{articles:n.articles.articles});case U:return Object(de.a)({},t);default:return t}},article:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case I:return Object(de.a)(Object(de.a)({},t),{},{article:(null===(e=n.article)||void 0===e?void 0:e.articles)?n.article.article:{}});case k:return Object(de.a)(Object(de.a)({},t),{},{article:n.article.article});case D:return{};default:return t}},comments:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ee:return Object(de.a)(Object(de.a)({},t),{},{comments:(null===(e=n.comments)||void 0===e?void 0:e.comments)?n.comments.comments:[]});case te:return Object(de.a)(Object(de.a)({},t),{},{comments:n.comments.comments});case ne:return{};default:return t}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(de.a)({},e);case H:return Object(de.a)(Object(de.a)({},e),{},{tags:t.tags.tags});case X:return{};default:return e}}}),fe=Object(E.a)(),ge=Object(m.d)(Ee,Object(m.a)(d.a,fe));function pe(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.user.token?{Authorization:"Token "+e.user.token}:{}}var ve={success:function(e){return{type:f,message:e}},error:function(e){return{type:g,message:e}},clear:function(){return{type:p}}};var be=n(6),Ae={login:function(e,t){he.user.email=e,he.user.password=t;var n={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},body:JSON.stringify(he)};return fetch("".concat(be.a,"/users/login"),n).then(Oe).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},logout:function(){localStorage.removeItem("user")},register:function(e){ye.user.email=e.email,ye.user.password=e.password,ye.user.username=e.username;var t={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(ye)};return fetch("".concat(be.a,"/users"),t).then(Oe)},getAllArticles:function(e){var t={method:"GET",headers:pe()};if("all"===e)return fetch("".concat(be.a,"/articles"),t).then(Oe);var n=JSON.parse(localStorage.getItem("user"));if("my"==e)return fetch("".concat(be.a,"/articles?author=").concat(n.user.username),t).then(Oe);return fetch("".concat(be.a,"/articles?favorited=").concat(n.user.username),t).then(Oe)},getArticleBySlug:function(e){var t={method:"GET",headers:pe()};return fetch("".concat(be.a,"/articles/").concat(e),t).then(Oe)},addArticle:function(e,t,n,a){Se.article.title=e,Se.article.description=t,Se.article.body=n,Se.article.tagList=a;var r={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization},body:JSON.stringify(Se)};return fetch("".concat(be.a,"/articles"),r).then(Oe)},updateArticle:function(e,t,n,a,r){Se.article.title=e,Se.article.description=t,Se.article.body=n,Se.article.tagList=a;var c={method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization},body:JSON.stringify(Se)};return fetch("".concat(be.a,"/articles/").concat(r),c).then(Oe)},deleteArticle:function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization},body:JSON.stringify(Se)};return fetch("".concat(be.a,"/articles/").concat(e),t).then(Oe)},getComments:function(e){var t={method:"GET",headers:{Authorization:pe().Authorization}};return fetch("".concat(be.a,"/articles/").concat(e,"/comments"),t).then(Oe)},addComment:function(e,t){Ce.comment.body=t;var n={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization},body:JSON.stringify(Ce)};return fetch("".concat(be.a,"/articles/").concat(e,"/comments"),n).then(Oe)},deleteComment:function(e,t){var n={method:"DELETE",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization},body:JSON.stringify(Se)};return fetch("".concat(be.a,"//articles/").concat(t,"/comments/").concat(e),n).then(Oe)},getTags:function(){var e={method:"GET",headers:pe()};return fetch("".concat(be.a,"/tags"),e).then(Oe)},getArticlesByTag:function(e){var t={method:"GET",headers:pe()};return fetch("".concat(be.a,"/articles/?tag=").concat(e),t).then(Oe)},markUnmarkFavourite:function(e,t){if(e){var n={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization}};return fetch("".concat(be.a,"/articles/").concat(t,"/favorite"),n).then(Oe)}var a={method:"DELETE",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept",Authorization:pe().Authorization}};return fetch("".concat(be.a,"/articles/").concat(t,"/favorite"),a).then(Oe)}},he={user:{email:"",password:""}},ye={user:{username:"",email:"",password:""}},Se={article:{title:"",description:"",body:"",tagList:[]}},Ce={comment:{body:""}};function Oe(e){return e.text().then((function(e){var t=e&&JSON.parse(e);if(t.errors){var n=Object.keys(t.errors),a=n[0]+" "+t.errors[n[0]];return Promise.reject(a)}return t}))}var Ne={login:function(e,t){return function(n){n({type:h,user:{email:e}}),Ae.login(e,t).then((function(e){n(function(e){return{type:y,user:e}}(e)),u.push("/")}),(function(e){console.log(e),n(function(e){return{type:S,error:e}}(e.toString())),n(ve.error(e.toString()))}))}},logout:function(){return Ae.logout(),{type:C}},register:function(e){return function(t){t(function(e){return{type:v,user:e}}(e)),Ae.register(e).then((function(e){t(function(e){return{type:b,user:e}}()),u.push("/login"),t(ve.success("Registration successful"))}),(function(e){t(function(e){return{type:A,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getAllArticles:function(e){return function(t){t({type:R}),Ae.getAllArticles(e).then((function(e){return t(function(e){return{type:w,articles:e}}(e))}),(function(e){return t(function(e){return{type:U,error:e}}(e.toString()))}))}},getArticleBySlug:function(e){return function(t){t(function(e){return{type:I,slug:e}}(e)),Ae.getArticleBySlug(e).then((function(e){t(function(e){return{type:k,article:e}}(e))}),(function(e){console.log(e),t(function(e){return{type:D,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},addArticle:function(e,t,n,a){return function(r){r(function(e,t,n,a){return{type:G,title:e,description:t,body:n,tagList:a}}(e,t,n,a)),Ae.addArticle(e,t,n,a).then((function(e){r(function(e){return{type:B,article:e}}(e)),u.push("/articles")}),(function(e){console.log(e),r(function(e){return{type:M,error:e}}(e.toString())),r(ve.error(e.toString()))}))}},updateArticle:function(e,t,n,a,r){return function(c){c(function(e,t,n,a){return{type:F,title:e,description:t,body:n,tagList:a}}(e,t,n,a)),Ae.updateArticle(e,t,n,a,r).then((function(e){c(function(e){return{type:x,article:e}}(e)),u.push("/articles")}),(function(e){console.log(e),c(function(e){return{type:q,error:e}}(e.toString())),c(ve.error(e.toString()))}))}},deleteArticle:function(e){return function(t){t(function(e){return{type:z,slug:e}}(e)),Ae.deleteArticle(e).then((function(e){t(function(e){return{type:W,article:e}}(e)),u.push("/articles")}),(function(e){console.log(e),t(function(e){return{type:J,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getComments:function(e){return function(t){t(function(e){return{type:ee,slug:e}}(e)),Ae.getComments(e).then((function(e){t(function(e){return{type:te,comments:e}}(e))}),(function(e){console.log(e),t(function(e){return{type:ne,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},addComment:function(e,t){return function(n){n(function(e,t){return{type:ae,slug:e,comment:t}}(e,t)),Ae.addComment(e,t).then((function(e){n(function(e){return{type:re,comment:e}}(e)),window.location.reload()}),(function(e){return n(function(e){return{type:ce,error:e}}(e.toString()))}))}},deleteComment:function(e,t){return function(n){n(function(e,t){return{type:ie,id:e,slug:t}}(e,t)),Ae.deleteComment(e,t).then((function(e){n(function(e){return{type:oe,comment:e}}(e)),window.location.reload()}),(function(e){return n(function(e){return{type:le,error:e}}(e.toString()))}))}},getTags:function(){return function(e){e({type:P,req:!0}),Ae.getTags().then((function(t){e(function(e){return{type:H,tags:e}}(t))}),(function(t){return e(function(e){return{type:X,error:e}}(t.toString()))}))}},getArticlesByTag:function(e){return function(t){t(function(e){return{type:K,tag:e}}(e)),Ae.getArticlesByTag(e).then((function(e){t(function(e){return{type:Y,articles:e}}(e))}),(function(e){return t(function(e){return{type:Q,error:e}}(e.toString()))}))}},markUnmarkFavourite:function(e,t){return function(n){n(function(e,t){return{type:V,flag:e,slug:t}}(e,t)),Ae.markUnmarkFavourite(e,t).then((function(e){n(function(e){return{type:$,article:e}}(e)),u.push("/article/"+t)}),(function(e){return n(function(e){return{type:Z,error:e}}(e.toString()))}))}}};var Te=function(e){var t=e.component,n=Object(me.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},_e=n(11),Le=n(5);function je(){var e=Object(l.c)((function(e){return e.authentication.user.user})),t=Object(l.b)();Object(a.useEffect)((function(){t(Ne.getAllArticles("all")),t(Ne.getTags())}),[]);var n=Object(l.c)((function(e){return e.articles.articles})),c=Object(l.c)((function(e){return e.tags.tags}));function i(e){var n=document.getElementById(e);"myArticles"===e?n.classList.contains("active")||(document.getElementById("allArticles").classList.remove("active"),document.getElementById("favArticles").classList.remove("active"),n.classList.add("active"),t(Ne.getAllArticles("my"))):"allArticles"===e?n.classList.contains("active")||(document.getElementById("myArticles").classList.remove("active"),document.getElementById("favArticles").classList.remove("active"),n.classList.add("active"),t(Ne.getAllArticles("all"))):n.classList.contains("active")||(document.getElementById("myArticles").classList.remove("active"),document.getElementById("allArticles").classList.remove("active"),n.classList.add("active"),t(Ne.getAllArticles("fav")))}return r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("h1",null,"Hi ",e.username,"!"),r.a.createElement("p",{className:"ml-4"},r.a.createElement(_e.a,{to:"/login"},"Logout"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{className:"btn btn-info mt-2",onClick:function(){u.push("/newArticle")}},"Add New Article"))),r.a.createElement("nav",{className:"navbar navbar-dark bg-dark justify-content-center"},r.a.createElement("ul",{className:"navbar-nav "},r.a.createElement("li",{className:"nav-item active",id:"allArticles"},r.a.createElement("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){return i("allArticles")}},"All Articles")),r.a.createElement("li",{className:"nav-item",id:"myArticles"},r.a.createElement("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){return i("myArticles")}},"My Articles")),r.a.createElement("li",{className:"nav-item",id:"favArticles"},r.a.createElement("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){return i("favArticles")}},"Favourite Articles")))),r.a.createElement("span",null,r.a.createElement("h4",{className:"bg-warning text-dark"},"Popular Tags")),r.a.createElement("div",null,c&&c.length>0&&r.a.createElement("div",null,c.map((function(e){return r.a.createElement("span",{key:e,className:"badge badge-success ml-2",style:{cursor:"pointer"},onClick:function(e){return function(e){var n=e.target.innerText;n&&!Le.a.isUndefined(n)&&t(Ne.getArticlesByTag(n))}(e)}},e)})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-8"}," ",r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter tag to search related articles...",id:"tagSearch"})),r.a.createElement("div",{className:"col-4"}," ",r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return function(){var e=document.getElementById("tagSearch").value.trim();e&&!Le.a.isUndefined(e)&&""!==e&&t(Ne.getArticlesByTag(e))}()}},"Search"))),n&&n.length>0&&r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{className:"mt-4 h-100 border border-white",key:e.slug},r.a.createElement("div",{className:" row ml-2"},r.a.createElement("span",{className:"badge badge-info mt-2"}," "+e.author.username)),r.a.createElement("div",{className:"ml-2"},r.a.createElement("h5",null,new Date(e.createdAt).toLocaleDateString())),r.a.createElement("div",{className:"ml-2"},r.a.createElement("h2",{style:{cursor:"pointer"},onClick:function(){return t=e.slug,void u.push("/articles/"+t);var t}},e.title)))}))))}var Re=n(13),we=n(12);function Ue(){var e=Object(a.useState)({email:"",password:""}),t=Object(we.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(we.a)(i,2),s=o[0],u=o[1],m=n.email,d=n.password,E=Object(l.c)((function(e){return e.authentication.loggingIn})),f=Object(l.b)();function g(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(de.a)(Object(de.a)({},e),{},Object(Re.a)({},n,a))}))}return Object(a.useEffect)((function(){f(Ne.logout())}),[]),r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),u(!0),m&&d&&f(Ne.login(m,d))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"email"),r.a.createElement("input",{type:"text",name:"email",value:m,onChange:g,className:"form-control"+(s&&!m?" is-invalid":"")}),s&&!m&&r.a.createElement("div",{className:"invalid-feedback"},"email is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:d,onChange:g,className:"form-control"+(s&&!d?" is-invalid":"")}),s&&!d&&r.a.createElement("div",{className:"invalid-feedback"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},E&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"),r.a.createElement(_e.a,{to:"/register",className:"btn btn-link"},"Register"))))}function Ie(){var e=Object(a.useState)({username:"",email:"",password:""}),t=Object(we.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(we.a)(i,2),s=o[0],u=o[1],m=Object(l.c)((function(e){return e.registration.registering})),d=Object(l.b)();function E(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(de.a)(Object(de.a)({},e),{},Object(Re.a)({},n,a))}))}return Object(a.useEffect)((function(){d(Ne.logout())}),[]),r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),u(!0),n.email&&n.username&&n.password&&d(Ne.register(n))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",value:n.username,onChange:E,className:"form-control"+(s&&!n.username?" is-invalid":"")}),s&&!n.username&&r.a.createElement("div",{className:"invalid-feedback"},"Username is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"email"),r.a.createElement("input",{type:"text",name:"email",value:n.email,onChange:E,className:"form-control"+(s&&!n.email?" is-invalid":"")}),s&&!n.email&&r.a.createElement("div",{className:"invalid-feedback"},"email is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:n.password,onChange:E,className:"form-control"+(s&&!n.password?" is-invalid":"")}),s&&!n.password&&r.a.createElement("div",{className:"invalid-feedback"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},m&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Register"),r.a.createElement(_e.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}function ke(){var e=Object(l.b)(),t=Object(o.g)().id;Object(a.useEffect)((function(){e(Ne.getArticleBySlug(t)),e(Ne.getComments(t))}),[]);var n=Object(l.c)((function(e){return e.article.article})),c=Object(l.c)((function(e){return e.comments.comments})),i=Object(l.c)((function(e){return e.authentication.user.user}));function s(t,n){e(Ne.markUnmarkFavourite(t,n))}return r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h1",null,"Article"),r.a.createElement("div",null,!Le.b(n)&&r.a.createElement("div",{className:"mt-4 h-100 border border-white"},r.a.createElement("div",{className:" row ml-2"},r.a.createElement("span",{className:"badge badge-info mt-2"}," "+n.author.username)),r.a.createElement("div",{className:"ml-2"},r.a.createElement("h5",null,new Date(n.createdAt).toLocaleDateString())),r.a.createElement("div",{className:"ml-2"},r.a.createElement("h2",null,n.title)),r.a.createElement("div",{className:"ml-2 h-100"},r.a.createElement("h4",{className:"text-justify pt-4",style:{wordWrap:"break-word",borderTop:"1px solid gray"}},n.body)),function(){if(!Le.b(n)&&!Le.b(i))return i.username===n.author.username}()&&r.a.createElement("div",{className:"row justify-content-center mb-4 mt-4"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e=n.slug,void u.push("/editArticle/"+e);var e}},"Edit Article"),r.a.createElement("button",{className:"btn btn-danger ml-4",onClick:function(){return t=n.slug,void e(Ne.deleteArticle(t));var t}},"Delete Article")),!n.favorited&&r.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return s(!0,n.slug)}},"Mark Favourite"),n.favorited&&r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return s(!1,n.slug)}},"Unfavourite"))),r.a.createElement("div",null,r.a.createElement("h3",null,"Add Comment"),r.a.createElement("textarea",{id:"newComment",className:"form-group form-control",name:"comment"}),r.a.createElement("button",{className:"btn btn-info",onClick:function(){var t;t=n.slug,e(Ne.addComment(t,document.getElementById("newComment").value))}},"Add Comment"),!Le.b(c)&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-4"},"Comments"),c.map((function(t){return r.a.createElement("div",{className:" ml-2 mt-4 h-100 border border-top border-primary",key:t.id},r.a.createElement("div",null,r.a.createElement("span",{className:"badge badge-info"},t.author.username),r.a.createElement("span",{className:"ml-4"},r.a.createElement("p",{className:""},new Date(t.createdAt).toLocaleDateString()))),r.a.createElement("div",null,r.a.createElement("textarea",{id:t.id,className:"form-group form-control",name:"comment",defaultValue:t.body,disabled:!0}),function(e,t){if(!Le.b(c)&&!Le.b(i))return i.username===e}(t.author.username)&&r.a.createElement("div",{className:"row justify-content-center mb-4 mt-4"},r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(e){return n=t,document.getElementById(""+n.id).disabled=!1,void(document.getElementById("update"+n.id).style.cursor="pointer");var n}},"Edit"),r.a.createElement("button",{id:"update"+t.id,className:"btn btn-sm btn-primary ml-2",style:{cursor:"no-drop"},onClick:function(){return function(e){document.getElementById(""+e).disabled=!0,document.getElementById("update"+e).style.cursor="no-drop"}(t.id)}},"Update"),r.a.createElement("button",{className:"btn btn-sm btn-danger ml-4",onClick:function(){return function(t,n){e(Ne.deleteComment(t,n))}(t.id,n.slug)}},"Delete"))))}))))))}function De(){var e=Object(o.g)().id;Object(a.useEffect)((function(){void 0!==e&&b(Ne.getArticleBySlug(e))}),[]);var t=Object(l.c)((function(e){return e.article.article}));Object(a.useEffect)((function(){void 0===e||Le.a.isUndefined(t)||Le.a.isEmpty(t)||s((function(){return{title:t.title,description:t.description,body:t.body,tagList:t.tagList}}))}),[]);var n=Object(a.useState)({title:"",description:"",body:"",tagList:[]}),c=Object(we.a)(n,2),i=c[0],s=c[1],u=Object(a.useState)(!1),m=Object(we.a)(u,2),d=m[0],E=m[1],f=i.title,g=i.description,p=i.body,v=i.tagList,b=Object(l.b)();function A(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(de.a)(Object(de.a)({},e),{},Object(Re.a)({},n,a))}))}return r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Add new article"),r.a.createElement("form",{name:"form",onSubmit:function(t){if(t.preventDefault(),E(!0),f&&g&&p){var n=function(e){if(!Le.a.isEmpty(e)){var t=e.trim();t=t.split(",");for(var n=0;n<t.length;n++)t[n]=t[n].trim();return t=Le.a.without(t,""),t=Le.a.uniq(t)}return[]}(v);Le.a.isUndefined(e)?b(Ne.addArticle(f,g,p,n)):b(Ne.updateArticle(f,g,p,n,e))}}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{id:"title",type:"text",name:"title",value:f,onChange:A,className:"form-control"+(d&&!f?" is-invalid":"")}),d&&!f&&r.a.createElement("div",{className:"invalid-feedback"},"title is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description"),r.a.createElement("input",{type:"text",name:"description",value:g,onChange:A,className:"form-control"+(d&&!g?" is-invalid":"")}),d&&!g&&r.a.createElement("div",{className:"invalid-feedback"},"desription is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Body"),r.a.createElement("textarea",{type:"text",name:"body",value:p,onChange:A,className:"form-control"+(d&&!p?" is-invalid":"")}),d&&!p&&r.a.createElement("div",{className:"invalid-feedback"},"body is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Tags(Enter comma separated values)"),r.a.createElement("input",{type:"text",name:"tagList",value:v,onChange:A,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-info"},e?"Update Article":"Add Article"))))}var Ge=function(){var e=Object(l.c)((function(e){return e.alert})),t=Object(l.b)();return Object(a.useEffect)((function(){u.listen((function(e,n){t(ve.clear())}))}),[]),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(o.c,{history:u},r.a.createElement(o.d,null,r.a.createElement(Te,{exact:!0,path:"/articles",component:je}),r.a.createElement(o.b,{path:"/login",component:Ue}),r.a.createElement(o.b,{path:"/register",component:Ie}),r.a.createElement(o.b,{path:"/articles/:id",component:ke}),r.a.createElement(o.b,{path:"/newArticle",component:De}),r.a.createElement(o.b,{path:"/editArticle/:id",component:De}),r.a.createElement(o.a,{from:"*",to:"/articles"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:ge},r.a.createElement(Ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e){e.exports=JSON.parse('{"a":"https://conduit.productionready.io/api"}')}},[[30,1,2]]]);
//# sourceMappingURL=main.cc56d5b7.chunk.js.map